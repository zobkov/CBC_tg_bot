# –†–µ–∑—é–º–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –¥–∏–∞–ª–æ–≥–µ –ø–µ—Ä–≤–æ–≥–æ —ç—Ç–∞–ø–∞

## –í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

### 1. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –æ–∫–æ–Ω - –≤—ã–±–æ—Ä –æ—Ç–¥–µ–ª–∞ –∏ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω –≤ –∫–æ–Ω–µ—Ü
- –û–∫–Ω–∞ `department` –∏ `position` —Ç–µ–ø–µ—Ä—å –∏–¥—É—Ç –ø–æ—Å–ª–µ `resume_upload`
- –ü–æ—Ä—è–¥–æ–∫: –∞–Ω–∫–µ—Ç–∞ ‚Üí –æ–ø—ã—Ç ‚Üí –º–æ—Ç–∏–≤–∞—Ü–∏—è ‚Üí —Ä–µ–∑—é–º–µ ‚Üí **–æ—Ç–¥–µ–ª ‚Üí –¥–æ–ª–∂–Ω–æ—Å—Ç—å** ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

### 2. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä –≤ "–û—Ç–∫—É–¥–∞ —É–∑–Ω–∞–ª–∏ –æ –ö–ë–ö"  
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã `Multiselect` –≤–∏–¥–∂–µ—Ç—ã –≤–º–µ—Å—Ç–æ `Radio` (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å aiogram_dialog 2.4.0)
- –î–æ–±–∞–≤–ª–µ–Ω—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ `on_how_found_toggled` –∏ `on_how_found_continue`
- –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ –º–Ω–æ–∂–µ—Å—Ç–≤–æ (`set`) –≤ `dialog_data["how_found_selections"]`
- –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–ø—É—Å–∫–∞ –æ–∫–Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –æ—Ç–¥–µ–ª–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ handlers

### 3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –≤–æ–ø—Ä–æ—Å –¥–ª—è —É—á–∞—Å—Ç–≤–æ–≤–∞–≤—à–∏—Ö –≤ –ö–ë–ö —Ä–∞–Ω–µ–µ
- –ù–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `FirstStageSG.previous_department`
- –û–∫–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è/–ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ª–æ–≥–∏–∫—É –≤ handlers (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å aiogram_dialog 2.4.0)
- –î–æ–±–∞–≤–ª–µ–Ω getter `get_departments_for_previous` –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `on_previous_department_selected`

### 4. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ —Ä–µ–∑—é–º–µ - 10 –ú–ë
- –û–±–Ω–æ–≤–ª–µ–Ω —Ç–µ–∫—Å—Ç –≤ –æ–∫–Ω–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–∑—é–º–µ: "‚ö†Ô∏è –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 10 –ú–ë"
- –£–ª—É—á—à–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞

### 5. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å aiogram_dialog 2.4.0
- –ó–∞–º–µ–Ω–µ–Ω `Checkbox` –Ω–∞ `Multiselect` –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞
- –£–±—Ä–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `when` –∏–∑ Window (–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ –≤–µ—Ä—Å–∏–∏ 2.4.0)
- –õ–æ–≥–∏–∫–∞ —É—Å–ª–æ–≤–Ω–æ–≥–æ –ø–æ–∫–∞–∑–∞ –æ–∫–æ–Ω –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –≤ handlers
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤—ã–º API

## –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

### ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –Ω–æ–≤–æ–µ –ø–æ–ª–µ `previous_department`
- –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `004_add_previous_department.sql`
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `update_first_stage_form()` –≤ `applications.py`
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å `ApplicationsModel` 
- –î–æ–±–∞–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç `run_previous_department_migration.py` –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏

## –û–±–Ω–æ–≤–ª–µ–Ω–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö:

### ‚úÖ CSV –∏ Google Sheets
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `previous_department` –≤ CSV —ç–∫—Å–ø–æ—Ä—Ç
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≥–æ–ª–æ–≤–∫–∏ CSV —Ñ–∞–π–ª–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ –≤ —ç–∫—Å–ø–æ—Ä—Ç–µ –¥–∞–Ω–Ω—ã—Ö

## –§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã:

1. `app/bot/states/first_stage.py` - –ø–æ—Ä—è–¥–æ–∫ —Å–æ—Å—Ç–æ—è–Ω–∏–π
2. `app/bot/dialogs/first_stage/dialogs.py` - –ø–æ—Ä—è–¥–æ–∫ –æ–∫–æ–Ω, –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞
3. `app/bot/dialogs/first_stage/handlers.py` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞, –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
4. `app/bot/dialogs/first_stage/getters.py` - getter –¥–ª—è —É—Å–ª–æ–≤–Ω–æ–≥–æ –ø–æ–∫–∞–∑–∞ –æ–∫–Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –æ—Ç–¥–µ–ª–∞
5. `app/infrastructure/database/database/applications.py` - —Ñ—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î
6. `app/infrastructure/database/models/applications.py` - –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö
7. `migrations/004_add_previous_department.sql` - –º–∏–≥—Ä–∞—Ü–∏—è –ë–î (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)
8. `run_previous_department_migration.py` - —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)

## –î–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π:

1. **–í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î:**
   ```bash
   python run_previous_department_migration.py
   ```

2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞** –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –¥–∏–∞–ª–æ–≥–∞—Ö

## –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø–æ–ª–Ω—è–µ—Ç –±–∞–∑–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é (–§–ò–û, —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç, –∫—É—Ä—Å, –∫–æ–Ω—Ç–∞–∫—Ç—ã)
2. –í—ã–±–∏—Ä–∞–µ—Ç **–Ω–µ—Å–∫–æ–ª—å–∫–æ** –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ "–û—Ç–∫—É–¥–∞ —É–∑–Ω–∞–ª–∏ –æ –ö–ë–ö" 
3. **–ï—Å–ª–∏** –≤—ã–±—Ä–∞–ª "–†–∞–Ω–µ–µ —É—á–∞—Å—Ç–≤–æ–≤–∞–ª –≤ –ö–ë–ö" ‚Üí –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤–æ–ø—Ä–æ—Å –æ –ø—Ä–µ–¥—ã–¥—É—â–µ–º –æ—Ç–¥–µ–ª–µ
4. –í–≤–æ–¥–∏—Ç –æ–ø—ã—Ç –∏ –º–æ—Ç–∏–≤–∞—Ü–∏—é
5. –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ä–µ–∑—é–º–µ (–º–∞–∫—Å. 10 –ú–ë)
6. **–í –∫–æ–Ω—Ü–µ** –≤—ã–±–∏—Ä–∞–µ—Ç –æ—Ç–¥–µ–ª –∏ –¥–æ–ª–∂–Ω–æ—Å—Ç—å
7. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∑–∞—è–≤–∫—É

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ
