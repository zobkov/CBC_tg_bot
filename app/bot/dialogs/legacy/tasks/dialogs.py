from aiogram_dialog import Dialog, Window
from aiogram_dialog.widgets.kbd import Button, Row, Back, Start, Column, Cancel, SwitchTo
from aiogram_dialog.widgets.input import MessageInput
from aiogram_dialog.widgets.text import Format, Const
from aiogram_dialog.widgets.media import StaticMedia, DynamicMedia
from aiogram_dialog.api.entities import MediaAttachment, MediaId
from aiogram.enums import ContentType
from magic_filter import F

from app.bot.states.main_menu import MainMenuSG
from app.bot.states.first_stage import FirstStageSG
from app.bot.states.tasks import TasksSG

from .handlers import *
from .getters import *

task_dialog = Dialog(
    
    # –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
    Window(
        Format("üìù <b>–¢–µ—Å—Ç–æ–≤—ã–µ –∑–∞–¥–∞–Ω–∏—è</b> \n\n–ù–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω —Å–ø–∏—Å–æ–∫ –≤–∞–∫–∞–Ω—Å–∏–π, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã –≤—ã–±—Ä–∞–ª –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã—Ö. –¢—ã –º–æ–∂–µ—à—å –æ—Ç–∫—Ä—ã—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–¥–∞–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏ –∏ –≤—ã–±—Ä–∞—Ç—å —Ç—É, —á—Ç–æ –±–ª–∏–∂–µ —Ç–µ–±–µ –ø–æ –¥—É—Ö—É." \
        "\n\n<b>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç ‚Ññ1:</b> <i>{task_1_header}</i>" \
        "\n<b>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç ‚Ññ2:</b> <i>{task_2_header}</i>" \
        "\n<b>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç ‚Ññ3:</b> <i>{task_3_header}</i>" \
        "\n\n‚ö†Ô∏è –ï—Å–ª–∏ —Ä—è–¥–æ–º —Å –≤–∞–∫–∞–Ω—Å–∏–µ–π –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è ¬´–∑–∞–º–æ—á–µ–∫¬ª, —ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ —ç—Ç–æ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–µ –±—ã–ª –æ–¥–æ–±—Ä–µ–Ω –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è. –°–æ—Å—Ä–µ–¥–æ—Ç–æ—á—å—Å—è –Ω–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö, –≥–¥–µ –¥–æ—Å—Ç—É–ø –æ—Ç–∫—Ä—ã—Ç. –ú—ã —É–≤–µ—Ä–µ–Ω—ã, —É —Ç–µ–±—è –≤—Å–µ –ø–æ–ª—É—á–∏—Ç—Å—è!"),
        Column(
            Button(
                Format("–¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ 1"),
                id="live_task_1",
                on_click=on_live_task_1_clicked,
                when=F["task_1_is_live"]
                ),
            Button(
                Format("üîí –¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ 1"),
                id="blocked_task_1",
                when=~F["task_1_is_live"]
                ),
            Button(
                Format("–¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ 2"),
                id="live_task_2",
                on_click=on_live_task_2_clicked,
                when=F["task_2_is_live"]
                ),
            Button(
                Format("üîí –¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ 2"),
                id="blocked_task_2",
                when=~F["task_2_is_live"]
                ),
            Button(
                Format("–¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ 3"),
                id="live_task_3",
                on_click=on_live_task_3_clicked,
                when=F["task_3_is_live"]
                ),
            Button(
                Format("üîí –¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ 3"),
                id="blocked_task_3",
                when=~F["task_3_is_live"]
                ),
        ),
        Cancel(Const("–ù–∞–∑–∞–¥"),id="back_to_menu_from_tasks"),
        
        state=TasksSG.main,
        getter=[get_user_info, get_live_tasks_info, get_task_1_info, get_task_2_info, get_task_3_info]
    ),

    # –¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ 1
    Window(
        Format("üìù<b>–¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ</b> \n{task_1_header}" \
        "\n\n–í —ç—Ç–æ–º –º–µ–Ω—é —Ç—ã –Ω–∞–π–¥—ë—à—å —Ç–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–∞–∫–∞–Ω—Å–∏–∏. –§–∞–π–ª –ø—Ä–∏–∫—Ä–µ–ø–ª—ë–Ω –≤—ã—à–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ PDF. –ó–¥–µ—Å—å –∂–µ —Ç—ã –º–æ–∂–µ—à—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–≤–æ—ë —Ä–µ—à–µ–Ω–∏–µ: –ø—Ä–∏–∫—Ä–µ–ø–∏ –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö. –ï—Å–ª–∏ –∑–∞–≥—Ä—É–∑–∏–ª –Ω–µ —Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã ‚Äî –≤—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –∏—Ö –∏ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –∑–∞–Ω–æ–≤–æ. –ë—É–¥—å –≤–Ω–∏–º–∞—Ç–µ–ª–µ–Ω: –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–∏—à—å —Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É, –∏–∑–º–µ–Ω–∏—Ç—å –µ–≥–æ —É–∂–µ –Ω–µ–ª—å–∑—è." \
        "\n\n‚è∞ <b>–î–µ–¥–ª–∞–π–Ω:</b> –¥–æ 2 –æ–∫—Ç—è–±—Ä—è 2025 –≥–æ–¥–∞, 23:59 (–ú–°–ö)" \
        "\n\n–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã, –Ω–∞—à–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ–≥–¥–∞ —Ä—è–¥–æ–º –∏ –≥–æ—Ç–æ–≤–∞ –ø–æ–º–æ—á—å ‚Äì @zobko"),
        DynamicMedia("task_1"),
        SwitchTo(Const("üì• –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—à–µ–Ω–∏—è"),id="task_1_to_upload_1",state=TasksSG.task_1_upload),
        SwitchTo(Const("–ù–∞–∑–∞–¥"),id="back_to_menu_from_task1",state=TasksSG.main),

        state=TasksSG.task_1,
        getter=[get_task_1_info, get_tasks_files]
    ),

    # –¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ 2
    Window(
        Format("üìù<b>–¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ</b> \n{task_2_header}" \
        "\n\n–í —ç—Ç–æ–º –º–µ–Ω—é —Ç—ã –Ω–∞–π–¥—ë—à—å —Ç–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–∞–∫–∞–Ω—Å–∏–∏. –§–∞–π–ª –ø—Ä–∏–∫—Ä–µ–ø–ª—ë–Ω –≤—ã—à–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ PDF. –ó–¥–µ—Å—å –∂–µ —Ç—ã –º–æ–∂–µ—à—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–≤–æ—ë —Ä–µ—à–µ–Ω–∏–µ: –ø—Ä–∏–∫—Ä–µ–ø–∏ –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö. –ï—Å–ª–∏ –∑–∞–≥—Ä—É–∑–∏–ª –Ω–µ —Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã ‚Äî –≤—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –∏—Ö –∏ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –∑–∞–Ω–æ–≤–æ. –ë—É–¥—å –≤–Ω–∏–º–∞—Ç–µ–ª–µ–Ω: –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–∏—à—å —Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É, –∏–∑–º–µ–Ω–∏—Ç—å –µ–≥–æ —É–∂–µ –Ω–µ–ª—å–∑—è." \
        "\n\n‚è∞ <b>–î–µ–¥–ª–∞–π–Ω:</b> –¥–æ 2 –æ–∫—Ç—è–±—Ä—è 2025 –≥–æ–¥–∞, 23:59 (–ú–°–ö)" \
        "\n\n–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã, –Ω–∞—à–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ–≥–¥–∞ —Ä—è–¥–æ–º –∏ –≥–æ—Ç–æ–≤–∞ –ø–æ–º–æ—á—å ‚Äì @zobko"),
        DynamicMedia("task_2"),
        SwitchTo(Const("üì• –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—à–µ–Ω–∏—è"),id="task_2_to_upload_2",state=TasksSG.task_2_upload),
        SwitchTo(Const("–ù–∞–∑–∞–¥"),id="back_to_menu_from_task2",state=TasksSG.main),

        state=TasksSG.task_2,
        getter=[get_task_2_info, get_tasks_files]
    ),

    # –¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ 3
    Window(
        Format("üìù<b>–¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ</b> \n{task_3_header}" \
        "\n\n–í —ç—Ç–æ–º –º–µ–Ω—é —Ç—ã –Ω–∞–π–¥—ë—à—å —Ç–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–∞–∫–∞–Ω—Å–∏–∏. –§–∞–π–ª –ø—Ä–∏–∫—Ä–µ–ø–ª—ë–Ω –≤—ã—à–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ PDF. –ó–¥–µ—Å—å –∂–µ —Ç—ã –º–æ–∂–µ—à—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–≤–æ—ë —Ä–µ—à–µ–Ω–∏–µ: –ø—Ä–∏–∫—Ä–µ–ø–∏ –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö. –ï—Å–ª–∏ –∑–∞–≥—Ä—É–∑–∏–ª –Ω–µ —Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã ‚Äî –≤—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –∏—Ö –∏ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –∑–∞–Ω–æ–≤–æ. –ë—É–¥—å –≤–Ω–∏–º–∞—Ç–µ–ª–µ–Ω: –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–∏—à—å —Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É, –∏–∑–º–µ–Ω–∏—Ç—å –µ–≥–æ —É–∂–µ –Ω–µ–ª—å–∑—è." \
        "\n\n‚è∞ <b>–î–µ–¥–ª–∞–π–Ω:</b> –¥–æ 2 –æ–∫—Ç—è–±—Ä—è 2025 –≥–æ–¥–∞, 23:59 (–ú–°–ö)" \
        "\n\n–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã, –Ω–∞—à–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ–≥–¥–∞ —Ä—è–¥–æ–º –∏ –≥–æ—Ç–æ–≤–∞ –ø–æ–º–æ—á—å ‚Äì @zobko"),
        DynamicMedia("task_3"),
        SwitchTo(Const("üì• –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—à–µ–Ω–∏—è"),id="task_3_to_upload_3",state=TasksSG.task_3_upload),
        SwitchTo(Const("–ù–∞–∑–∞–¥"),id="back_to_menu_from_task3",state=TasksSG.main),

        state=TasksSG.task_3,
        getter=[get_task_3_info, get_tasks_files]
    ),

    # –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ 1
    Window(
        Format("üìù <b>–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è –∑–∞–¥–∞–Ω–∏—è 1</b>\n\n"
               "–î–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–π —Ñ–∞–π–ª—ã —Å—é–¥–∞. –ö–æ–≥–¥–∞ –∑–∞–∫–æ–Ω—á–∏—à—å –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–∞–π–ª—ã, –Ω–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏.\n\n"
               "<b>–í–ù–ò–ú–ê–ù–ò–ï! –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–º–µ–Ω—è—Ç—å –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –µ—â–µ —Ñ–∞–π–ª—ã!</b>\n"
               "–ï—Å–ª–∏ —Ç—ã –¥—É–º–∞–µ—à—å, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ ‚Äì –ü–∏—à–∏ @zobko\n\n"
               "<b>–ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:</b>\n{files_text}"),
        Column(
            Button(
                Const("‚ùå –£–¥–∞–ª–∏—Ç—å –í–°–ï —Ñ–∞–π–ª—ã"), 
                id="delete_all_files_task_1",
                on_click=on_delete_all_files_task_1
            ),
            Button(
                Const("‚úÖ –ó–∞–∫–æ–Ω—á–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –∏ –∑–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ"), 
                id="confirm_upload_task_1", 
                on_click=on_confirm_upload_task_1
            ),
            SwitchTo(Const("‚¨ÖÔ∏è –ù–∞–∑–∞–¥"), id="back_from_upload_1", state=TasksSG.task_1),
        ),
        MessageInput(
            on_document_upload_task_1, 
            content_types=[ContentType.DOCUMENT]
        ),
        MessageInput(
            on_wrong_content_type,
            content_types=[ContentType.TEXT, ContentType.PHOTO, ContentType.VIDEO, ContentType.AUDIO, ContentType.VOICE, ContentType.STICKER, ContentType.ANIMATION, ContentType.VIDEO_NOTE, ContentType.LOCATION, ContentType.CONTACT]
        ),

        state=TasksSG.task_1_upload,
        getter=[get_task_1_info, get_user_files_info_task_1]
    ),

    # –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ 2
    Window(
        Format("üìù <b>–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è –∑–∞–¥–∞–Ω–∏—è 2</b>\n\n"
               "–î–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–π —Ñ–∞–π–ª—ã —Å—é–¥–∞. –ö–æ–≥–¥–∞ –∑–∞–∫–æ–Ω—á–∏—à—å –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–∞–π–ª—ã, –Ω–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏.\n\n"
               "<b>–í–ù–ò–ú–ê–ù–ò–ï! –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–º–µ–Ω—è—Ç—å –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –µ—â–µ —Ñ–∞–π–ª—ã!</b>\n"
               "–ï—Å–ª–∏ —Ç—ã –¥—É–º–∞–µ—à—å, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ ‚Äì –ü–∏—à–∏ @zobko\n\n"
               "<b>–ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:</b>\n{files_text}"),
        Column(
            Button(
                Const("‚ùå –£–¥–∞–ª–∏—Ç—å –í–°–ï —Ñ–∞–π–ª—ã"), 
                id="delete_all_files_task_2",
                on_click=on_delete_all_files_task_2
            ),
            Button(
                Const("‚úÖ –ó–∞–∫–æ–Ω—á–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –∏ –∑–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ"), 
                id="confirm_upload_task_2", 
                on_click=on_confirm_upload_task_2
            ),
            SwitchTo(Const("‚¨ÖÔ∏è –ù–∞–∑–∞–¥"), id="back_from_upload_2", state=TasksSG.task_2),
        ),
        MessageInput(
            on_document_upload_task_2, 
            content_types=[ContentType.DOCUMENT]
        ),
        MessageInput(
            on_wrong_content_type,
            content_types=[ContentType.TEXT, ContentType.PHOTO, ContentType.VIDEO, ContentType.AUDIO, ContentType.VOICE, ContentType.STICKER, ContentType.ANIMATION, ContentType.VIDEO_NOTE, ContentType.LOCATION, ContentType.CONTACT]
        ),

        state=TasksSG.task_2_upload,
        getter=[get_task_2_info, get_user_files_info_task_2]
    ),

    # –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ 3
    Window(
        Format("üìù <b>–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è –∑–∞–¥–∞–Ω–∏—è 3</b>\n\n"
               "–î–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–π —Ñ–∞–π–ª—ã —Å—é–¥–∞. –ö–æ–≥–¥–∞ –∑–∞–∫–æ–Ω—á–∏—à—å –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–∞–π–ª—ã, –Ω–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏.\n\n"
               "<b>–í–ù–ò–ú–ê–ù–ò–ï! –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–º–µ–Ω—è—Ç—å –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –µ—â–µ —Ñ–∞–π–ª—ã!</b>\n"
               "–ï—Å–ª–∏ —Ç—ã –¥—É–º–∞–µ—à—å, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ ‚Äì –ü–∏—à–∏ @zobko\n\n"
               "<b>–ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:</b>\n{files_text}"),
        Column(
            Button(
                Const("‚ùå –£–¥–∞–ª–∏—Ç—å –í–°–ï —Ñ–∞–π–ª—ã"), 
                id="delete_all_files_task_3",
                on_click=on_delete_all_files_task_3
            ),
            Button(
                Const("‚úÖ –ó–∞–∫–æ–Ω—á–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –∏ –∑–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ"), 
                id="confirm_upload_task_3", 
                on_click=on_confirm_upload_task_3
            ),
            SwitchTo(Const("‚¨ÖÔ∏è –ù–∞–∑–∞–¥"), id="back_from_upload_3", state=TasksSG.task_3),
        ),
        MessageInput(
            on_document_upload_task_3, 
            content_types=[ContentType.DOCUMENT]
        ),
        MessageInput(
            on_wrong_content_type,
            content_types=[ContentType.TEXT, ContentType.PHOTO, ContentType.VIDEO, ContentType.AUDIO, ContentType.VOICE, ContentType.STICKER, ContentType.ANIMATION, ContentType.VIDEO_NOTE, ContentType.LOCATION, ContentType.CONTACT]
        ),

        state=TasksSG.task_3_upload,
        getter=[get_task_3_info, get_user_files_info_task_3]
    ),

    # –£–∂–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∑–∞–¥–∞–Ω–∏–µ 1
    Window(
        Format("üöÄ <b>–†–µ—à–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ! </b>\n\n"
               "–ù–∞–º —É–∂–µ –Ω–µ —Ç–µ—Ä–ø–∏—Ç—Å—è –Ω–∞—á–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É, —á—Ç–æ–±—ã –ª—É—á—à–µ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å —Ç–æ–±–æ–π –∏ –ø–æ–Ω—è—Ç—å, –∫–∞–∫ —Ç—ã —Å–º–æ—Ç—Ä–∏—à—å –Ω–∞ –º–∏—Ä.\n"
               "üìÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—É–¥—É—Ç –æ–±—ä—è–≤–ª–µ–Ω—ã 7 –æ–∫—Ç—è–±—Ä—è –≤ 12:00 (–ú–°–ö)."),
        SwitchTo(Const("‚¨ÖÔ∏è –ù–∞–∑–∞–¥"), id="back_from_submitted_1", state=TasksSG.main),
        state=TasksSG.task_1_submitted
    ),

    # –£–∂–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∑–∞–¥–∞–Ω–∏–µ 2
    Window(
        Format("üöÄ <b>–†–µ—à–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ! </b>\n\n"
               "–ù–∞–º —É–∂–µ –Ω–µ —Ç–µ—Ä–ø–∏—Ç—Å—è –Ω–∞—á–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É, —á—Ç–æ–±—ã –ª—É—á—à–µ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å —Ç–æ–±–æ–π –∏ –ø–æ–Ω—è—Ç—å, –∫–∞–∫ —Ç—ã —Å–º–æ—Ç—Ä–∏—à—å –Ω–∞ –º–∏—Ä.\n"
               "üìÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—É–¥—É—Ç –æ–±—ä—è–≤–ª–µ–Ω—ã 7 –æ–∫—Ç—è–±—Ä—è –≤ 12:00 (–ú–°–ö)."),
        SwitchTo(Const("‚¨ÖÔ∏è –ù–∞–∑–∞–¥"), id="back_from_submitted_2", state=TasksSG.main),
        state=TasksSG.task_2_submitted
    ),

    # –£–∂–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∑–∞–¥–∞–Ω–∏–µ 3
    Window(
        Format("üöÄ <b>–†–µ—à–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ! </b>\n\n"
               "–ù–∞–º —É–∂–µ –Ω–µ —Ç–µ—Ä–ø–∏—Ç—Å—è –Ω–∞—á–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É, —á—Ç–æ–±—ã –ª—É—á—à–µ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å —Ç–æ–±–æ–π –∏ –ø–æ–Ω—è—Ç—å, –∫–∞–∫ —Ç—ã —Å–º–æ—Ç—Ä–∏—à—å –Ω–∞ –º–∏—Ä.\n"
               "üìÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—É–¥—É—Ç –æ–±—ä—è–≤–ª–µ–Ω—ã 7 –æ–∫—Ç—è–±—Ä—è –≤ 12:00 (–ú–°–ö)."),
        SwitchTo(Const("‚¨ÖÔ∏è –ù–∞–∑–∞–¥"), id="back_from_submitted_3", state=TasksSG.main),
        state=TasksSG.task_3_submitted
    ),

    # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤ –¥–ª—è –∑–∞–¥–∞–Ω–∏—è 1
    Window(
        Const("‚è≥ <b>–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤...</b>\n\n"
              "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ. –í–∞—à–∏ —Ñ–∞–π–ª—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è.\n"
              "–ö–æ–≥–¥–∞ –≤—Å–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã, –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å."),
        SwitchTo(Const("üì• –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É"), id="back_to_upload_1", state=TasksSG.task_1_upload),
        state=TasksSG.task_1_processing
    ),

    # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤ –¥–ª—è –∑–∞–¥–∞–Ω–∏—è 2
    Window(
        Const("‚è≥ <b>–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤...</b>\n\n"
              "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ. –í–∞—à–∏ —Ñ–∞–π–ª—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è.\n"
              "–ö–æ–≥–¥–∞ –≤—Å–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã, –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å."),
        SwitchTo(Const("üì• –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É"), id="back_to_upload_2", state=TasksSG.task_2_upload),
        state=TasksSG.task_2_processing
    ),

    # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤ –¥–ª—è –∑–∞–¥–∞–Ω–∏—è 3
    Window(
        Const("‚è≥ <b>–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤...</b>\n\n"
              "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ. –í–∞—à–∏ —Ñ–∞–π–ª—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è.\n"
              "–ö–æ–≥–¥–∞ –≤—Å–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã, –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å."),
        SwitchTo(Const("üì• –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É"), id="back_to_upload_3", state=TasksSG.task_3_upload),
        state=TasksSG.task_3_processing
    ),

    Window(
        Const("‚öôÔ∏è –§–∞–π–ª—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è..."),
        state=TasksSG.file_processing,
    )

)